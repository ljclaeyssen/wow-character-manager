<div class="character-detail-container">
  <div class="character-detail-header">
    <p-button
      icon="pi pi-arrow-left"
      severity="secondary"
      [text]="true"
      size="small"
      pTooltip="Back to character list"
      (onClick)="onClose()"
      class="back-button">
    </p-button>

    <h2 class="character-detail-title">Character Details</h2>

    <div class="character-detail-actions">
      <p-button
        icon="pi pi-pencil"
        label="Edit"
        severity="info"
        size="small"
        (onClick)="onEditCharacter()">
      </p-button>

      <p-button
        icon="pi pi-trash"
        label="Delete"
        severity="danger"
        size="small"
        (onClick)="onDeleteCharacter()">
      </p-button>
    </div>
  </div>

  @if (character()) {
    <div class="character-detail-content">
      <!-- Character Overview Card -->
      <wow-character-overview-card
        [character]="currentCharacter()!"
        [vaultProgress]="vaultProgress()">
      </wow-character-overview-card>


    <!-- Activity Statistics Card -->
    <p-card class="activity-stats-card">
      <ng-template pTemplate="header">
        <h4 class="card-title">
          <i class="pi pi-chart-bar"></i>
          Activity Statistics
        </h4>
      </ng-template>

      <div class="activity-stats-grid">
        <div class="stat-item">
          <span class="stat-value">{{ activityStats().totalActivities }}</span>
          <span class="stat-label">Total Activities</span>
        </div>

        <div class="stat-item">
          <span class="stat-value">{{ activityStats().weeklyCompleted }}</span>
          <span class="stat-label">This Week</span>
        </div>

        <div class="stat-item">
          <span class="stat-value">{{ activityStats().mythicPlusCompleted }}</span>
          <span class="stat-label">M+ Dungeons</span>
        </div>

        <div class="stat-item">
          <span class="stat-value">{{ activityStats().raidsCompleted }}</span>
          <span class="stat-label">Raid Bosses</span>
        </div>

        <div class="stat-item">
          <span class="stat-value">{{ activityStats().pvpMatches }}</span>
          <span class="stat-label">PvP Matches</span>
        </div>
      </div>
    </p-card>

    <!-- Recent Activities Card -->
    <p-card class="recent-activities-card">
      <ng-template pTemplate="header">
        <h4 class="card-title">
          <i class="pi pi-history"></i>
          Recent Activities
        </h4>
      </ng-template>

      @if (recentActivities().length === 0) {
        <div class="no-activities">
          <i class="pi pi-info-circle"></i>
          <span>No activities recorded yet</span>
        </div>
      } @else {
        <div class="activities-list">
          <div class="no-activities">
            <i class="pi pi-calendar-minus"></i>
            <p>No recent activities found</p>
            <p class="text-muted">Activity tracking will be implemented in a future update</p>
          </div>
        </div>
      }
    </p-card>

    <!-- Character Information Card -->
    <p-card class="character-info-card">
      <ng-template pTemplate="header">
        <h4 class="card-title">
          <i class="pi pi-info-circle"></i>
          Character Information
        </h4>
      </ng-template>

      <div class="character-info-grid">
        <div class="info-row">
          <span class="info-label">Created:</span>
          <span class="info-value">{{ formatDate(currentCharacter()!.createdAt) }}</span>
        </div>

        <div class="info-row">
          <span class="info-label">Last Updated:</span>
          <span class="info-value">{{ formatDate(currentCharacter()!.updatedAt) }}</span>
        </div>

        <div class="info-row">
          <span class="info-label">Character ID:</span>
          <span class="info-value character-id">{{ currentCharacter()!.id }}</span>
        </div>
      </div>
    </p-card>
    </div>
  } @else {
    <div class="character-loading">
      <p>Character not found.</p>
      <p-button
        label="Back to Characters"
        icon="pi pi-arrow-left"
        severity="secondary"
        (onClick)="onClose()">
      </p-button>
    </div>
  }
</div>