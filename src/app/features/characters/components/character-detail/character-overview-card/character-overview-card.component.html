<p-card class="character-overview-card">
  <ng-template pTemplate="header">
    <div class="character-card-header">
      <div class="character-basic-info">
        <h3
          class="character-name"
          [style.color]="getClassColor(character().characterClass)">
          {{ character().name }}
        </h3>

        <div class="character-subtitle">
          <span class="character-race-class">
            {{ getRaceDisplayName(character().race) }} {{ character().characterClass }}
          </span>
        </div>
      </div>

      <div class="character-faction">
        <p-tag
          [value]="character().faction"
          [severity]="character().faction === 'Alliance' ? 'info' : 'danger'"
          [icon]="getFactionIcon(character().faction)"
          class="faction-tag">
        </p-tag>
      </div>
    </div>
  </ng-template>

  <div class="character-overview-content">
    <div class="character-specs-professions">
      <div class="character-specialization">
        <label class="info-label">Specialization:</label>
        <p-chip
          [label]="character().specialization"
          [style]="{ 'background-color': getClassColor(character().characterClass) + '20',
                    'color': getClassColor(character().characterClass) }">
        </p-chip>
      </div>

      @if (character().professions.length > 0) {
        <div class="character-professions">
          <label class="info-label">Professions:</label>
          <div class="professions-list">
            @for (profession of character().professions; track profession) {
              <p-chip [label]="profession" severity="secondary"></p-chip>
            }
          </div>
        </div>
      }
    </div>

    <p-divider></p-divider>

    <!-- Vault Progress Section -->
    <div class="vault-progress-section">
      <h4 class="section-title">
        <i class="pi pi-treasure-chest"></i>
        Great Vault Progress
      </h4>

      <div class="vault-overview">
        <div class="vault-summary">
          <span class="vault-slots-count">{{ vaultProgress().total }}/9 Slots</span>
          <p-progressBar
            [value]="getVaultProgressPercentage()"
            [showValue]="true"
            class="vault-progress-bar">
          </p-progressBar>
        </div>
      </div>

      <div class="vault-breakdown">
        <div class="vault-source">
          <div class="source-header">
            <i class="pi pi-trophy source-icon raid-icon"></i>
            <span class="source-label">Raid</span>
          </div>
          <div class="source-progress">
            <span class="source-count">{{ vaultProgress().raid }}/3</span>
            <div class="source-slots">
              @for (slot of [0, 1, 2]; track slot) {
                <div
                  class="vault-slot"
                  [class.completed]="slot < vaultProgress().raid"
                  [class.raid-slot]="true">
                </div>
              }
            </div>
          </div>
        </div>

        <div class="vault-source">
          <div class="source-header">
            <i class="pi pi-compass source-icon mythic-icon"></i>
            <span class="source-label">Mythic+</span>
          </div>
          <div class="source-progress">
            <span class="source-count">{{ vaultProgress().mythicPlus }}/3</span>
            <div class="source-slots">
              @for (slot of [0, 1, 2]; track slot) {
                <div
                  class="vault-slot"
                  [class.completed]="slot < vaultProgress().mythicPlus"
                  [class.mythic-slot]="true">
                </div>
              }
            </div>
          </div>
        </div>

        <div class="vault-source">
          <div class="source-header">
            <i class="pi pi-flag source-icon pvp-icon"></i>
            <span class="source-label">PvP</span>
          </div>
          <div class="source-progress">
            <span class="source-count">{{ vaultProgress().pvp }}/3</span>
            <div class="source-slots">
              @for (slot of [0, 1, 2]; track slot) {
                <div
                  class="vault-slot"
                  [class.completed]="slot < vaultProgress().pvp"
                  [class.pvp-slot]="true">
                </div>
              }
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</p-card>