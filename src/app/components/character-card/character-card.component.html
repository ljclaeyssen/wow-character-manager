<div
  class="character-card"
  [class.selected]="selected()"
  (click)="onCharacterClick()">

  <!-- Character Header -->
  <div class="character-header">
    <div class="character-avatar">
      <i class="pi pi-user"></i>
    </div>
    <div class="character-info">
      <h3 class="character-name" [style.color]="getClassColor(character().characterClass)">
        {{ character().name }}
      </h3>
      <div class="character-meta">
        <span class="character-class">{{ character().characterClass }}</span>
        <span class="character-separator">â€¢</span>
        <span class="character-faction" [class]="character().faction.toLowerCase()">
          {{ character().faction }}
        </span>
      </div>
    </div>
    <div class="character-actions">
      <button
        class="action-btn edit-btn"
        (click)="onEditClick($event)"
        title="Edit Character">
        <i class="pi pi-pencil"></i>
      </button>
    </div>
  </div>

  <!-- Progress Section -->
  <div class="character-progress">
    <!-- Vault Progress -->
    <div class="progress-section vault-section">
      <div class="progress-header">
        <div class="progress-title">
          <i class="pi pi-trophy"></i>
          <span>Great Vault</span>
        </div>
        <div class="progress-value">{{ character().vaultProgress }}/9</div>
      </div>
      <div class="progress-bar-container">
        <div class="progress-bar">
          <div
            class="progress-fill"
            [style.width.%]="character().vaultPercentage"
            [class.complete]="character().vaultPercentage === 100">
          </div>
        </div>
        <span class="progress-percentage">{{ character().vaultPercentage }}%</span>
      </div>
    </div>

    <!-- Weekly Activities -->
    <div class="progress-section activities-section">
      <div class="progress-header">
        <div class="progress-title">
          <i class="pi pi-calendar"></i>
          <span>Weekly Activities</span>
        </div>
        <div class="activity-count" [class.active]="character().weeklyActivities > 0">
          {{ character().weeklyActivities }}
        </div>
      </div>
    </div>

    <!-- Last Activity -->
    @if (character().lastActivity) {
      <div class="last-activity-section">
        <i class="pi pi-clock"></i>
        <span>{{ formatRelativeTime(character().lastActivity!) }}</span>
      </div>
    }
  </div>

  <!-- Selection Indicator -->
  <div class="selection-indicator">
    <i class="pi pi-check"></i>
  </div>
</div>