<div class="dashboard-container">
  <!-- Dashboard Header -->
  <div class="dashboard-header p-d-flex p-flex-column p-gap-3">
    <div class="header-content p-d-flex p-flex-column p-gap-2">
      <h1>WoW Character Manager</h1>
      <div class="header-stats p-d-flex p-flex-wrap p-gap-3 p-justify-center p-md-justify-start">
        <div class="stat-item p-d-flex p-flex-column p-align-center p-text-center">
          <span class="stat-value">{{ dashboardStats().totalCharacters }}</span>
          <span class="stat-label">Characters</span>
        </div>
        <div class="stat-item p-d-flex p-flex-column p-align-center p-text-center">
          <span class="stat-value">{{ dashboardStats().totalActivities }}</span>
          <span class="stat-label">Weekly Activities</span>
        </div>
        <div class="stat-item p-d-flex p-flex-column p-align-center p-text-center">
          <span class="stat-value">{{ dashboardStats().averageVaultProgress }}%</span>
          <span class="stat-label">Avg Vault Progress</span>
        </div>
        <div class="stat-item p-d-flex p-flex-column p-align-center p-text-center">
          <span class="stat-value">{{ getNextResetTime() }}</span>
          <span class="stat-label">Until Reset</span>
        </div>
      </div>
    </div>

  </div>

  <!-- Main Content Area with Split Layout -->
  <div class="dashboard-main">
    <div class="dashboard-split">
      <!-- Left Panel - Character Selection (25%) -->
      <div class="left-panel">
        <p-card header="Characters" styleClass="character-overview-card">
          @if (characters().length > 0) {
            <!-- Character Cards List -->
            <div class="character-list">
              @for (character of enhancedCharacters(); track character.id) {
                <wow-character-card
                  [character]="character"
                  [selected]="selectedCharacter()?.id === character.id"
                  (characterSelect)="onCharacterSelect($event)"
                  (characterEdit)="onEditCharacter($event)">
                </wow-character-card>
              }
            </div>
          } @else {
            <div class="no-characters">
              <i class="pi pi-users"></i>
              <h3>No Characters</h3>
              <p>Create your first character to start tracking!</p>
              <p-button
                label="Add Character"
                icon="pi pi-plus"
                severity="info"
                size="small"
                routerLink="/characters">
              </p-button>
            </div>
          }
        </p-card>
      </div>

      <!-- Right Panel - Activity Tracking (75%) -->
      <div class="right-panel">
        @if (selectedCharacter()) {
          <p-card styleClass="activity-tracking-card">
            <wow-activity-tracker
              [selectedCharacter]="selectedCharacter()">
            </wow-activity-tracker>
          </p-card>
        } @else {
          <p-card header="Select a Character" styleClass="no-selection-card">
            <div class="no-selection">
              <i class="pi pi-hand-point-left"></i>
              <h3>Select a Character</h3>
              <p>Choose a character from the left panel to view their detailed activity tracking and progress.</p>
            </div>
          </p-card>
        }
      </div>
    </div>
  </div>


  <!-- Loading States -->
  @if (charactersLoading() || activitiesLoading()) {
    <div class="loading-overlay">
      <i class="pi pi-spin pi-spinner"></i>
      <span>Loading dashboard data...</span>
    </div>
  }
</div>