<!-- Desktop Navigation -->
@if (!isMobile()) {
  <div class="desktop-navigation">
    <p-menubar
      [model]="desktopMenuItems()"
      styleClass="app-menubar">

      <!-- Start content slot for additional navigation items -->
      <ng-template pTemplate="start">
        <div class="nav-brand">
          <i class="pi pi-shield nav-brand-icon"></i>
          <span class="nav-brand-text">WoW Manager</span>
        </div>
      </ng-template>

      <!-- End content slot for user actions -->
      <ng-template pTemplate="end">
        <div class="nav-actions">
          <app-theme-toggle
            displayMode="icon"
            severity="secondary">
          </app-theme-toggle>

          <p-button
            icon="pi pi-refresh"
            [text]="true"
            [rounded]="true"
            severity="secondary"
            pTooltip="Refresh Data"
            tooltipPosition="bottom"
            (onClick)="navigate('/dashboard')">
          </p-button>
        </div>
      </ng-template>
    </p-menubar>
  </div>
}

<!-- Mobile Navigation Sidebar -->
@if (isMobile()) {
  <p-drawer
    [visible]="sidebarVisible()"
    position="left"
    [modal]="true"
    [dismissible]="true"
    styleClass="mobile-navigation-sidebar"
    (onHide)="onSidebarHide()">

    <!-- Sidebar Header -->
    <ng-template pTemplate="header">
      <div class="mobile-nav-header">
        <div class="mobile-nav-brand">
          <i class="pi pi-shield mobile-nav-brand-icon"></i>
          <div class="mobile-nav-brand-content">
            <span class="mobile-nav-brand-title">WoW Manager</span>
            <span class="mobile-nav-brand-subtitle">Character Tracker</span>
          </div>
        </div>
      </div>
    </ng-template>

    <!-- Sidebar Content -->
    <div class="mobile-nav-content">
      <div class="mobile-nav-menu">
        @for (item of mobileMenuItems(); track item.label) {
          <!-- Section Headers -->
          @if (item.disabled && item.styleClass === 'menu-section-header') {
            <div class="mobile-menu-section-header">
              <i [class]="item.icon"></i>
              <span>{{ item.label }}</span>
            </div>
          }

          <!-- Menu Items -->
          @if (!item.disabled) {
            <a
              [routerLink]="item.routerLink"
              class="mobile-menu-item"
              [class.mobile-menu-child-item]="item.styleClass === 'menu-child-item'"
              [class.active-route]="isRouteActive(item.routerLink || '', currentRoute())"
              (click)="onMobileMenuItemClick(item)">
              <i [class]="item.icon"></i>
              <span>{{ item.label }}</span>
              @if (isRouteActive(item.routerLink || '', currentRoute())) {
                <i class="pi pi-check route-active-indicator"></i>
              }
            </a>
          }
        }
      </div>
    </div>

    <!-- Sidebar Footer -->
    <ng-template pTemplate="footer">
      <div class="mobile-nav-footer">
        <div class="mobile-footer-actions">
          <app-theme-toggle
            displayMode="text"
            severity="secondary">
          </app-theme-toggle>

          <p-button
            label="Close Menu"
            icon="pi pi-times"
            severity="secondary"
            [outlined]="true"
            (onClick)="closeMobileSidebar()">
          </p-button>
        </div>
      </div>
    </ng-template>
  </p-drawer>
}